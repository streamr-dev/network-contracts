type Bounty @entity {
  id: ID! # bounty address
  isRunning: Boolean!
  stakes: [Stake!]! @derivedFrom(field: "bounty")
  brokerCount: Int!
  totalStakedWei: BigInt!
  unallocatedWei: BigInt!
  projectedInsolvency: BigInt!
}

type Stake @entity {
  id: ID! # 0xbountyAddress-0xbrokerAddress
  broker: String!
  amount: BigInt!
  allocatedWei: BigInt!
  date: BigInt
  bounty: Bounty
  pool: Pool @derivedFrom(field: "stakes")
}

type Pool @entity {
  id: ID! # pool address
  stakes: [Stake!]!
  investors: [PoolInvestment!]! @derivedFrom(field: "pool")
  investorCount: Int
  approximatePoolValue: BigInt!
  unallocatedWei: BigInt!
}

type PoolInvestment @entity {
  id: ID! # 0xpoolAddress-0xbrokerAddress
  investor: String!
  amount: BigInt!
  pool: Pool
}